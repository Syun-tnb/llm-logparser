# LLM Log Parser — Runtime Config
# 保存場所（推奨）:
# - macOS/Linux: ~/.config/llm-logparser/config.yaml
# - Windows:     %APPDATA%/llm-logparser/config.yaml
# - Local opt:   ./.llp/config.yaml

schema_version: 1
active_profile: default

profiles:
  default:
    # ===== General =====
    locale: ja-JP        # CLI/ログ/Markdown固定文言の表示言語
    timezone: Asia/Tokyo # デフォルトTZ（CLI引数で上書き可）

    # ===== Provider =====
    provider: chatgpt
    provider_config_path: providers/chatgpt.yaml

    # ===== Input =====
    input:
      paths:
        - artifacts/messages-00001.jsonl
      encoding: utf-8

    # ===== Output =====
    output:
      dir: artifacts/output
      # 分割ポリシー
      split_by: size           # size|count|date|none（複合は将来検討）
      split_size_mb: 20
      max_msgs_per_file: 8000
      split_by_date: none      # none|day|week|month
      ascii_filenames: true

    # ===== Cache / Dedupe =====
    cache:
      enabled: true
      path: artifacts/cache/state.json
      # 既存 + 今回の最終決定値で自動マージされる想定

    # ===== Logging =====
    logging:
      level: info              # debug|info|warn|error
      json_events: true        # Viewer取り込み用のNDJSONイベント
      log_file: null           # 任意: logs/llp.log

    # ===== i18n =====
    i18n:
      fallback_locale: en-US   # 未訳フォールバック
      resources_dir: i18n      # en-US.yaml / ja-JP.yaml など

    # ===== Config Save Policy =====
    autosave: true             # 実行後に最終決定値を保存
    backup_generations: 3      # config.yaml.bak の世代保持

    # ===== Advanced (通常は変更不要) =====
    dry_run: false
    fail_fast: false           # 将来: 最初のERRORで停止
    # GUI 連携は同ファイルを直接参照・編集（排他ロックは実装側要件）

  work:
    locale: en-US
    timezone: Asia/Tokyo
    provider: chatgpt
    provider_config_path: providers/chatgpt.yaml
    input:
      paths:
        - artifacts/messages-latest.jsonl
      encoding: utf-8
    output:
      dir: artifacts/output
      split_by: count
      split_size_mb: 20
      max_msgs_per_file: 5000
      split_by_date: month
      ascii_filenames: true
    cache:
      enabled: true
      path: artifacts/cache/state.json
    logging:
      level: info
      json_events: true
      log_file: null
    i18n:
      fallback_locale: en-US
      resources_dir: i18n
    autosave: true
    backup_generations: 3